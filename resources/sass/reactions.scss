/*********************************************
# Reactions
*********************************************/

$dl-nesting-depth: 1em;
$ruleset-padding: 1rem;
$condition-padding: 1em;
$border-color: #ddd;

/* Reaction Table */

tr.reaction-row {
  @extend .pointer;
}

tr.reaction-row:hover, main:not(.page-list-manager) table tbody tr:nth-child(even).reaction-row:hover {
  background-color: #888;
}

/* Errors */

$error-color: pink;

dl.reaction-error {
  background-color: $error-color;
  padding: 0.5em;
  display: grid;
  gap: 1em;
  grid-template-columns: max-content auto;
  > dt {
    grid-column-start: 1;
  }
  > dd {
    grid-column-start: 2;
    margin-bottom: 0;
  }
}

ul.reaction-error-list {
  background-color: $error-color;
  margin-top: 5px;
}

div.reaction-edit-invalid {
  background-color: $error-color;
}

/* Info Panel */

dl.reaction-info-panel.right {
  float: right;
  padding-right: 20%;
}

/* Ruleset */

div.reaction-ruleset > label {
  font-size: larger;
  padding-bottom: 8px;
}

div.reaction-ruleset > hr {
  width: 100%;
  margin-top: $ruleset-padding;
  margin-bottom: $ruleset-padding;
}

/* Ruleset Conditions */

div.conditions {
  > div.condition {
    background-color: #eee;
  }
  > div.condition:not(:first-child) {
    border-top: 1px dashed black;
  }
}

div.condition {
  position: relative;
  padding: $condition-padding;
  > div.condition-name {
    padding-bottom: $condition-padding;
  }
}

div.clause {
  // border: 1px solid black;
  padding: $condition-padding;
  position: relative;
}

div.clause.even {
  background-color: #ddd;
}

div.clause.odd {
  background-color: #eee;
}

div.clause-type-label {
  padding-bottom: $condition-padding;
}

div.boolean {
  > div.boolean-label {
    padding-bottom: $condition-padding;
  }
  // break between list items
  > div.boolean-body {
    > div:not(:first-child) {
      margin-top: $condition-padding;
    }
  }
}

div.delete-icon {
  position: absolute;
  top: 1em;
  color: black;
  right: 1em;
  > a {
    > img {
      max-height: 1.4em;
    }
  }
}

div.add-icon {
  top: 1em;
  color: black;
  > a {
    > img {
      max-height: 1.4em;
    }
  }
  padding-top: $condition-padding;
}

div.add-clause {
  width: 100%;
  height: 20px;
  padding-top: 5px;
}

div.add-clause div.action-dropdown {
  float: right;
}


dl.op-list {
  margin: 0;
  display: grid;
  gap: 1em;
  grid-template-columns: max-content auto;
  > dt {
    grid-column-start: 1;
  }
  > dd {
    grid-column-start: 2;
    margin-bottom: 0;
  }
}

dl.ref {
  border-style: solid;
  margin: 0;
  padding: $condition-padding;
  display: grid;
  gap: 1em;
  grid-template-columns: max-content auto;
  > dt {
    grid-column-start: 1;
  }
  > dd {
    grid-column-start: 2;
    margin-bottom: 0;
  }
}

div.val {
  > select {
    margin-right: 4px;
  }
}

/* Paths */

$path-input-border: 2px solid #137BCE;;
$path-input-border-radius: 4px;

div.path-input {
  display: flex;
  color: #11375C !important;
  > div:first-child {
    border-radius: $path-input-border-radius 0px 0px $path-input-border-radius;
    border-left: $path-input-border;
  }
  > div {
    border-top: $path-input-border;
    border-right: $path-input-border;
    border-bottom: $path-input-border;
  }

  > div:last-child {
    border-radius: 0px $path-input-border-radius $path-input-border-radius 0px;
  }
  > div.path-input-root {
    padding: 8px;
  }
  > div.path-input-segment {
    padding: 8px;
  }
  > div.path-input-segment-edit {
    > input.index {
      height: 100%;
      width: 4em;
    }
    > div.segment-combo {
      min-width: 8em;
    }
  }
  > div.path-input-action {
    padding: 8px;
    > a {
      > img {
        max-height: 1.5em;
      }
    }
  }
}

div.path-input.invalid {
  background-color: $error-color;
}

ul.identity-paths {
  padding-left: 0;
  list-style-type: none;
  > li {
    padding-bottom: 8px;
  }
}

ul.identity-paths.view {
  padding: $ruleset-padding;
  border: 1px solid $border-color;
}

/* Dropdown Panes (for dynamic variables + identity paths) */

span.pane-collapse {
  @extend .pointer;
}

span.pane-collapse:after {
  background: url('../images/icons/icon-expand-more.svg') no-repeat center center;
  content: '';
  display: inline-block;
  vertical-align: top;
  width: 20px;
  height: 20px;
  background-size: contain;
  text-align: left;
  margin: 4px 8px 0 0;
}

span.pane-collapse.expanded:after {
  background-image: url('../images/icons/icon-expand-less.svg');
}

/* Dynamic Variables */

div.dynamic-variables {
  margin-bottom: $condition-padding;
  > div.inner {
    padding: 15px;
    background-color: #eee;
  }
}

/* Template */

pre.template {
  padding: $ruleset-padding;
  border: 1px solid $border-color;
}

/* Button Hovering */

a:hover {
  color: #11375C;
}
